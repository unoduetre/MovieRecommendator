#!/usr/bin/env python3
# -*- coding: utf-8 -*-

from Feature import Feature

class Similar(Feature):
  description = """
Basic: Similar movies
""".strip()
  
  tmdbIds = frozenset([12, 13, 14, 15, 19, 22, 24, 28, 38, 55, 62, 70, 73, 76, 77, 78, 81, 85, 89, 93, 98, 100, 103, 105, 107, 110, 111, 115, 117, 121, 128, 137, 141, 143, 155, 185, 187, 197, 205, 212, 213, 218, 223, 235, 238, 239, 247, 272, 274, 275, 278, 279, 280, 284, 288, 289, 303, 309, 311, 322, 329, 348, 380, 389, 391, 423, 424, 429, 453, 489, 497, 500, 510, 524, 539, 550, 562, 567, 576, 578, 583, 585, 595, 596, 598, 599, 600, 603, 627, 629, 630, 641, 642, 654, 665, 680, 694, 702, 703, 705, 745, 762, 769, 770, 783, 792, 797, 804, 805, 807, 826, 829, 832, 845, 857, 862, 872, 887, 901, 903, 910, 914, 935, 947, 949, 961, 962, 963, 968, 975, 982, 990, 993, 996, 1091, 1092, 1124, 1366, 1417, 1422, 1480, 1578, 1580, 1585, 1892, 1955, 2062, 2118, 2493, 2503, 3078, 3082, 3083, 3090, 3112, 3175, 5915, 5924, 5925, 5961, 6977, 7345, 7508, 7984, 8392, 8587, 9277, 9552, 10020, 10098, 10191, 10774, 10775, 11216, 11324, 11645, 11697, 11778, 11787, 12405, 12445, 13223, 13475, 16869, 17654, 20453, 24238, 24428, 27205, 37165, 37247, 44214, 45269, 46738, 49051, 68718, 74643, 77338, 87827, 103663])
  
  def __init__(self, *args, **kwargs):
    Feature.__init__(self)
 
  def extract(self, m):
    return ','.join(map(str, sorted(filter(lambda smi: smi in self.tmdbIds, list(sm['id'] for sm in m.similar_movies)))))
